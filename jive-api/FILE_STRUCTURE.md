# Jive Money API æ–‡ä»¶ç»“æ„è¯´æ˜

## ğŸ“ ä¸»ç¨‹åºæ–‡ä»¶ (src/)

### âœ… æ´»è·ƒä½¿ç”¨çš„æ–‡ä»¶

#### **main_complete.rs** ğŸŒŸ
- **ç”¨é€”**: å®Œæ•´ç‰ˆ APIï¼ˆæ¨èä½¿ç”¨ï¼‰
- **åŠŸèƒ½**: WebSocket + æ‰€æœ‰åŠŸèƒ½
- **å¯åŠ¨**: `cargo run --bin jive-api-complete`
- **çŠ¶æ€**: âœ… æ­£åœ¨ä½¿ç”¨

#### **main_simple_ws.rs**
- **ç”¨é€”**: ç²¾ç®€ç‰ˆå¸¦è®¤è¯
- **åŠŸèƒ½**: æ ¸å¿ƒ API + è®¤è¯ï¼Œæ—  WebSocket
- **å¯åŠ¨**: `cargo run --bin jive-api-core`
- **çŠ¶æ€**: âœ… å¤‡ç”¨ç‰ˆæœ¬

#### **main_simple.rs**
- **ç”¨é€”**: æœ€ç®€åŒ–æµ‹è¯•ç‰ˆ
- **åŠŸèƒ½**: ä»…æ¨¡æ‹Ÿ APIï¼Œç”¨äºå¿«é€Ÿæµ‹è¯•
- **å¯åŠ¨**: `cargo run --bin jive-api-simple`
- **çŠ¶æ€**: âœ… æµ‹è¯•ç”¨

### âš ï¸ å‚è€ƒæ–‡ä»¶

#### **main.rs**
- **ç”¨é€”**: åŸå§‹å®Œæ•´ç‰ˆ
- **çŠ¶æ€**: âš ï¸ æœ‰ç¼–è¯‘é—®é¢˜ï¼Œä»…ä½œå‚è€ƒ
- **å»ºè®®**: å¯è€ƒè™‘åˆ é™¤æˆ–ä¿®å¤

## ğŸ“¦ æ ¸å¿ƒæ¨¡å—æ–‡ä»¶

### âœ… å¿…éœ€çš„æ¨¡å—

- **error.rs** - é”™è¯¯å¤„ç†ï¼ˆApiError, ApiResultï¼‰
- **auth.rs** - è®¤è¯åŠŸèƒ½ï¼ˆJWT, Claimsï¼‰
- **ws.rs** - WebSocket å®ç°ï¼ˆæ–°ç‰ˆï¼‰
- **lib.rs** - åº“å®šä¹‰æ–‡ä»¶

### ğŸ“‚ ç›®å½•ç»“æ„

```
src/
â”œâ”€â”€ handlers/           # API å¤„ç†å™¨
â”‚   â”œâ”€â”€ accounts.rs
â”‚   â”œâ”€â”€ auth.rs
â”‚   â”œâ”€â”€ transactions.rs
â”‚   â”œâ”€â”€ payees.rs
â”‚   â”œâ”€â”€ rules.rs
â”‚   â”œâ”€â”€ ledgers.rs
â”‚   â””â”€â”€ ...
â”œâ”€â”€ models/            # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ mod.rs
â”‚   â”œâ”€â”€ family.rs
â”‚   â”œâ”€â”€ membership.rs
â”‚   â””â”€â”€ ...
â”œâ”€â”€ services/          # ä¸šåŠ¡æœåŠ¡
â”‚   â”œâ”€â”€ mod.rs
â”‚   â”œâ”€â”€ auth_service.rs
â”‚   â”œâ”€â”€ family_service.rs
â”‚   â””â”€â”€ ...
â”œâ”€â”€ middleware/        # ä¸­é—´ä»¶
â”‚   â””â”€â”€ cors.rs
â””â”€â”€ migrations/        # æ•°æ®åº“è¿ç§»

```

## ğŸ—‘ï¸ å·²åˆ é™¤çš„æ–‡ä»¶

ä»¥ä¸‹æ–‡ä»¶å·²è¢«åˆ é™¤ï¼Œå› ä¸ºä¸å†ä½¿ç”¨ï¼š

- **websocket.rs** - æ—§çš„ WebSocket å®ç°ï¼Œå·²è¢« ws.rs æ›¿ä»£
- **db.rs** - æœªä½¿ç”¨çš„æ•°æ®åº“æ¨¡å—
- **main_full.rs** - æ—©æœŸå°è¯•ç‰ˆæœ¬
- **main_with_ws.rs** - æœ‰é—®é¢˜çš„ç‰ˆæœ¬
- **main_ws.rs** - æ—§ç‰ˆæœ¬

## ğŸš€ å¿«é€Ÿå‘½ä»¤

```bash
# æŸ¥çœ‹æ‰€æœ‰å¯ç”¨çš„äºŒè¿›åˆ¶ç›®æ ‡
cargo build --bins

# è¿è¡Œå®Œæ•´ç‰ˆï¼ˆæ¨èï¼‰
cargo run --bin jive-api-complete

# è¿è¡Œç²¾ç®€ç‰ˆ
cargo run --bin jive-api-core

# è¿è¡Œæµ‹è¯•ç‰ˆ
cargo run --bin jive-api-simple
```

## ğŸ“ ç»´æŠ¤å»ºè®®

1. **ä¸»è¦ç»´æŠ¤**: `main_complete.rs`
2. **ä¿ç•™å¤‡ä»½**: `main_simple_ws.rs` ä½œä¸ºç¨³å®šå¤‡é€‰
3. **æµ‹è¯•ç”¨é€”**: `main_simple.rs` ç”¨äºå¿«é€Ÿæµ‹è¯•
4. **è€ƒè™‘æ¸…ç†**: `main.rs` å¯ä»¥åˆ é™¤æˆ–ä¿®å¤

## æ›´æ–°æ—¥æœŸ: 2025-09-07