# Jive Money API - æ¸…ç†åçš„æ–‡ä»¶ç»“æ„

## âœ… å½“å‰æ–‡ä»¶ç»“æ„ï¼ˆå·²æ¸…ç†ï¼‰

```
src/
â”œâ”€â”€ main.rs              # ğŸŒŸ ä¸»ç¨‹åºï¼ˆå®Œæ•´ç‰ˆï¼ŒåŒ…å« WebSocketï¼‰
â”œâ”€â”€ main_simple.rs       # ç²¾ç®€æµ‹è¯•ç‰ˆï¼ˆæ— è®¤è¯ï¼‰
â”œâ”€â”€ main_simple_ws.rs    # ç²¾ç®€ç‰ˆå¸¦è®¤è¯ï¼ˆæ—  WebSocketï¼‰
â”œâ”€â”€ auth.rs              # JWT è®¤è¯æ¨¡å—
â”œâ”€â”€ error.rs             # é”™è¯¯å¤„ç†æ¨¡å—
â”œâ”€â”€ lib.rs               # åº“å®šä¹‰æ–‡ä»¶
â”œâ”€â”€ ws.rs                # WebSocket å®ç°
â”‚
â”œâ”€â”€ bin/                 # å‘½ä»¤è¡Œå·¥å…·
â”‚   â”œâ”€â”€ generate_password.rs  # å¯†ç ç”Ÿæˆå·¥å…·
â”‚   â””â”€â”€ hash_password.rs      # å¯†ç å“ˆå¸Œå·¥å…·
â”‚
â”œâ”€â”€ handlers/            # API å¤„ç†å™¨
â”‚   â”œâ”€â”€ mod.rs
â”‚   â”œâ”€â”€ accounts.rs      # è´¦æˆ·ç®¡ç†
â”‚   â”œâ”€â”€ auth.rs          # è®¤è¯å¤„ç†
â”‚   â”œâ”€â”€ auth_handler.rs  # è®¤è¯è¾…åŠ©
â”‚   â”œâ”€â”€ transactions.rs  # äº¤æ˜“ç®¡ç†
â”‚   â”œâ”€â”€ payees.rs        # æ”¶æ¬¾äººç®¡ç†
â”‚   â”œâ”€â”€ rules.rs         # è§„åˆ™å¼•æ“
â”‚   â”œâ”€â”€ ledgers.rs       # è´¦æœ¬ç®¡ç†
â”‚   â”œâ”€â”€ template_handler.rs    # æ¨¡æ¿ç®¡ç†
â”‚   â”œâ”€â”€ family_handler.rs      # å®¶åº­ç®¡ç†
â”‚   â”œâ”€â”€ member_handler.rs      # æˆå‘˜ç®¡ç†
â”‚   â”œâ”€â”€ invitation_handler.rs  # é‚€è¯·ç®¡ç†
â”‚   â””â”€â”€ audit_handler.rs       # å®¡è®¡æ—¥å¿—
â”‚
â”œâ”€â”€ models/              # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ mod.rs
â”‚   â”œâ”€â”€ audit.rs         # å®¡è®¡æ¨¡å‹
â”‚   â”œâ”€â”€ family.rs        # å®¶åº­æ¨¡å‹
â”‚   â”œâ”€â”€ invitation.rs    # é‚€è¯·æ¨¡å‹
â”‚   â”œâ”€â”€ membership.rs    # æˆå‘˜å…³ç³»
â”‚   â””â”€â”€ permission.rs    # æƒé™æ¨¡å‹
â”‚
â”œâ”€â”€ services/            # ä¸šåŠ¡æœåŠ¡
â”‚   â”œâ”€â”€ mod.rs
â”‚   â”œâ”€â”€ auth_service.rs         # è®¤è¯æœåŠ¡
â”‚   â”œâ”€â”€ family_service.rs       # å®¶åº­æœåŠ¡
â”‚   â”œâ”€â”€ member_service.rs       # æˆå‘˜æœåŠ¡
â”‚   â”œâ”€â”€ invitation_service.rs   # é‚€è¯·æœåŠ¡
â”‚   â”œâ”€â”€ audit_service.rs        # å®¡è®¡æœåŠ¡
â”‚   â”œâ”€â”€ transaction_service.rs  # äº¤æ˜“æœåŠ¡
â”‚   â”œâ”€â”€ budget_service.rs       # é¢„ç®—æœåŠ¡
â”‚   â”œâ”€â”€ context.rs              # æœåŠ¡ä¸Šä¸‹æ–‡
â”‚   â””â”€â”€ error.rs                # æœåŠ¡é”™è¯¯
â”‚
â””â”€â”€ middleware/          # ä¸­é—´ä»¶
    â”œâ”€â”€ mod.rs
    â”œâ”€â”€ auth_check.rs    # è®¤è¯æ£€æŸ¥
    â”œâ”€â”€ permission_check.rs  # æƒé™æ£€æŸ¥
    â””â”€â”€ cors.rs          # CORS é…ç½®
```

## ğŸ—‘ï¸ å·²åˆ é™¤çš„æ— ç”¨æ–‡ä»¶

ä»¥ä¸‹æ–‡ä»¶å·²è¢«åˆ é™¤ï¼Œå› ä¸ºå®ƒä»¬æ²¡æœ‰è¢«ä½¿ç”¨ï¼š

1. **config.rs** - é…ç½®æ–‡ä»¶ï¼ˆæœªä½¿ç”¨ï¼‰
2. **routes.rs** - æ—§è·¯ç”±å®šä¹‰ï¼ˆå·²è¢«å†…è”ï¼‰
3. **routes_with_permissions.rs** - æƒé™è·¯ç”±ï¼ˆæœªä½¿ç”¨ï¼‰
4. **websocket.rs** - æ—§ WebSocket å®ç°ï¼ˆå·²è¢« ws.rs æ›¿ä»£ï¼‰
5. **db.rs** - æ•°æ®åº“æ¨¡å—ï¼ˆæœªä½¿ç”¨ï¼‰
6. **main_full.rs** - æ—©æœŸå°è¯•ç‰ˆæœ¬
7. **main_with_ws.rs** - æœ‰é—®é¢˜çš„ç‰ˆæœ¬
8. **main_ws.rs** - æ—§ç‰ˆæœ¬
9. **.DS_Store** - Mac ç³»ç»Ÿæ–‡ä»¶

## ğŸ“Š æ–‡ä»¶ç”¨é€”è¯´æ˜

### æ ¸å¿ƒæ–‡ä»¶
- **main.rs** - ä¸»ç¨‹åºå…¥å£ï¼Œå®Œæ•´åŠŸèƒ½ç‰ˆæœ¬
- **auth.rs** - JWT ä»¤ç‰Œç”Ÿæˆå’ŒéªŒè¯
- **error.rs** - ç»Ÿä¸€é”™è¯¯å¤„ç†
- **ws.rs** - WebSocket è¿æ¥ç®¡ç†

### å¤‡é€‰ç‰ˆæœ¬
- **main_simple.rs** - å¿«é€Ÿæµ‹è¯•ç”¨ï¼Œæ¨¡æ‹Ÿæ•°æ®
- **main_simple_ws.rs** - ç¨³å®šå¤‡é€‰ç‰ˆæœ¬

### ç›®å½•è¯´æ˜
- **handlers/** - å¤„ç† HTTP è¯·æ±‚
- **models/** - å®šä¹‰æ•°æ®ç»“æ„
- **services/** - ä¸šåŠ¡é€»è¾‘å®ç°
- **middleware/** - è¯·æ±‚æ‹¦æˆªå’Œå¤„ç†

## ğŸš€ ä½¿ç”¨å»ºè®®

```bash
# è¿è¡Œä¸»ç¨‹åºï¼ˆæ¨èï¼‰
cargo run --bin jive-api

# è¿è¡Œç²¾ç®€ç‰ˆï¼ˆæµ‹è¯•ï¼‰
cargo run --bin jive-api-simple

# è¿è¡Œå¤‡é€‰ç‰ˆæœ¬
cargo run --bin jive-api-core

# ç”Ÿæˆå¯†ç å“ˆå¸Œ
cargo run --bin hash_password

# ç”Ÿæˆéšæœºå¯†ç 
cargo run --bin generate_password
```

## âœ¨ ç‰¹ç‚¹

- æ–‡ä»¶ç»“æ„æ¸…æ™°ï¼Œæ²¡æœ‰å†—ä½™
- æ¨¡å—èŒè´£åˆ†æ˜
- æ”¯æŒå¤šç§è¿è¡Œæ¨¡å¼
- åŒ…å«å®ç”¨å·¥å…·

## æ›´æ–°æ—¶é—´: 2025-09-07