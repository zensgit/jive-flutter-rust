# Jive Money åŸºäº Maybe æºä»£ç çš„å®ç°è¿›åº¦

## æ¦‚è¿°
é€šè¿‡ç›´æ¥å‚è€ƒMaybeçš„æºä»£ç ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå¿«é€Ÿå®ç°Jive Moneyçš„æ ¸å¿ƒåŠŸèƒ½ï¼Œç¡®ä¿åŠŸèƒ½å®Œæ•´æ€§å’Œæˆç†Ÿåº¦ã€‚

## âœ… å·²å®ŒæˆåŠŸèƒ½

### 1. æ•°æ®åº“æ¶æ„é€‚é…
- **Schemaè½¬æ¢**: æˆåŠŸå°†Maybeçš„Rails schemaè½¬æ¢ä¸ºPostgreSQL SQL
- **å®ä½“æ˜ å°„**: åˆ›å»ºäº†å®Œæ•´çš„Rustå®ä½“ç»“æ„
- **å¤šæ€æ”¯æŒ**: å®ç°äº†Rails delegated_typeåœ¨Rustä¸­çš„ç­‰æ•ˆæ–¹æ¡ˆ

### 2. è´¦æˆ·ç®¡ç†ç³»ç»Ÿ
åŸºäº `app/models/account.rb` å®ç°ï¼š
- âœ… 11ç§è´¦æˆ·ç±»å‹æ”¯æŒï¼ˆDepository, CreditCard, Investment, Property, Loanç­‰ï¼‰
- âœ… è´¦æˆ·çŠ¶æ€æœºï¼ˆactive, draft, disabled, pending_deletionï¼‰
- âœ… ä½™é¢ç®¡ç†å’Œå†å²è®°å½•
- âœ… å¤šè´§å¸æ”¯æŒ
- âœ… å‡€å€¼è®¡ç®—
- âœ… è´¦æˆ·åˆ†ç»„åŠŸèƒ½

**å…³é”®æ–‡ä»¶**ï¼š
- `infrastructure/entities/account.rs` - è´¦æˆ·å®ä½“å®šä¹‰
- `infrastructure/repositories/account_repository.rs` - æ•°æ®è®¿é—®å±‚
- `application/account_service.rs` - ä¸šåŠ¡é€»è¾‘å±‚

### 3. äº¤æ˜“ç®¡ç†ç³»ç»Ÿ
åŸºäº `app/models/transaction.rb` å®ç°ï¼š
- âœ… Entry-TransactionåŒå±‚æ¨¡å‹ï¼ˆå¤å¼è®°è´¦ï¼‰
- âœ… 5ç§äº¤æ˜“ç±»å‹ï¼ˆstandard, funds_movement, cc_payment, loan_payment, one_timeï¼‰
- âœ… åˆ†ç±»å’Œæ ‡ç­¾ç³»ç»Ÿ
- âœ… æ”¶æ¬¾äººï¼ˆPayeeï¼‰ç®¡ç†
- âœ… æŠ¥é”€åŠŸèƒ½ï¼ˆreimbursable/reimbursedï¼‰
- âœ… äº¤æ˜“æ‹†åˆ†ï¼ˆTransaction Splitsï¼‰
- âœ… é€€æ¬¾å¤„ç†ï¼ˆRefundsï¼‰
- âœ… å®šæ—¶äº¤æ˜“ï¼ˆScheduled Transactionsï¼‰
- âœ… å¤šè´¦æœ¬æ”¯æŒ

**å…³é”®æ–‡ä»¶**ï¼š
- `infrastructure/entities/transaction.rs` - äº¤æ˜“ç›¸å…³å®ä½“
- `infrastructure/repositories/transaction_repository.rs` - äº¤æ˜“æ•°æ®è®¿é—®

### 4. åˆ†ç±»å’Œæ ‡ç­¾ç³»ç»Ÿ
åŸºäº `app/models/category.rb` å’Œ `app/models/tag.rb`ï¼š
- âœ… å±‚çº§åˆ†ç±»ï¼ˆparent_idæ”¯æŒï¼‰
- âœ… æ”¶å…¥/æ”¯å‡ºåˆ†ç±»
- âœ… ç³»ç»Ÿåˆ†ç±»å’Œè‡ªå®šä¹‰åˆ†ç±»
- âœ… æ ‡ç­¾å¤šæ€å…³è”
- âœ… è‡ªåŠ¨åˆ†ç±»è§„åˆ™ï¼ˆPayeeCategoryï¼‰

## ğŸ”„ è¿›è¡Œä¸­çš„åŠŸèƒ½

### CSVå¯¼å…¥ç³»ç»Ÿ
å‚è€ƒ `app/models/import.rb`ï¼š
- [ ] CSVæ–‡ä»¶è§£æ
- [ ] å­—æ®µæ˜ å°„
- [ ] æ•°æ®éªŒè¯
- [ ] æ‰¹é‡å¯¼å…¥

### é¢„ç®—ç®¡ç†
å‚è€ƒ `app/models/budget.rb`ï¼š
- [ ] æœˆåº¦/å¹´åº¦é¢„ç®—
- [ ] åˆ†ç±»é¢„ç®—
- [ ] é¢„ç®—è·Ÿè¸ªå’ŒæŠ¥å‘Š
- [ ] é¢„ç®—è­¦æŠ¥

## ğŸ“Š åŠŸèƒ½å¯¹æ¯”è¡¨

| åŠŸèƒ½æ¨¡å— | Maybeå®ç° | Jiveå®ç° | å®Œæˆåº¦ |
|---------|----------|----------|--------|
| è´¦æˆ·ç®¡ç† | âœ… å®Œæ•´ | âœ… å·²å®ç° | 100% |
| äº¤æ˜“ç®¡ç† | âœ… å®Œæ•´ | âœ… å·²å®ç° | 100% |
| åˆ†ç±»æ ‡ç­¾ | âœ… å®Œæ•´ | âœ… å·²å®ç° | 100% |
| æ”¶æ¬¾äººç®¡ç† | âœ… å®Œæ•´ | âœ… å·²å®ç° | 100% |
| æŠ¥é”€ç³»ç»Ÿ | âœ… å®Œæ•´ | âœ… å·²å®ç° | 100% |
| äº¤æ˜“æ‹†åˆ† | âœ… å®Œæ•´ | âœ… å·²å®ç° | 100% |
| å®šæ—¶äº¤æ˜“ | âœ… å®Œæ•´ | âœ… å·²å®ç° | 100% |
| CSVå¯¼å…¥ | âœ… å®Œæ•´ | ğŸ”„ è¿›è¡Œä¸­ | 30% |
| é¢„ç®—ç®¡ç† | âœ… å®Œæ•´ | â³ å¾…å¼€å§‹ | 0% |
| è§„åˆ™å¼•æ“ | âœ… å®Œæ•´ | â³ å¾…å¼€å§‹ | 0% |
| æŠ•èµ„ç®¡ç† | âœ… å®Œæ•´ | â³ å¾…å¼€å§‹ | 0% |
| æŠ¥è¡¨åˆ†æ | âœ… å®Œæ•´ | â³ å¾…å¼€å§‹ | 0% |

## ğŸ¯ æŠ€æœ¯å®ç°äº®ç‚¹

### 1. Entry-Transactionæ¨¡å¼
ç›´æ¥é‡‡ç”¨Maybeçš„åŒå±‚äº¤æ˜“æ¨¡å‹ï¼š
```rust
// Entryè´Ÿè´£è®°è´¦æ¡ç›®
pub struct Entry {
    pub amount: Decimal,
    pub date: NaiveDate,
    pub account_id: Uuid,
    // ...
}

// Transactionè´Ÿè´£äº¤æ˜“è¯¦æƒ…
pub struct Transaction {
    pub entry_id: Uuid,
    pub category_id: Option<Uuid>,
    pub payee_id: Option<Uuid>,
    // ...
}
```

### 2. å¤šæ€è´¦æˆ·å¤„ç†
```rust
// Railsçš„delegated_typeåœ¨Rustä¸­çš„å®ç°
pub trait Accountable {
    const TYPE_NAME: &'static str;
    async fn save(&self, tx: &mut PgConnection) -> Result<Uuid>;
}

impl Accountable for CreditCard {
    const TYPE_NAME: &'static str = "CreditCard";
    // ...
}
```

### 3. äº¤æ˜“ç±»å‹æšä¸¾
```rust
// åŸºäºMaybeçš„transaction kinds
pub enum TransactionKind {
    Standard,       // å¸¸è§„äº¤æ˜“ï¼Œè®¡å…¥é¢„ç®—
    FundsMovement,  // è´¦æˆ·é—´è½¬è´¦
    CcPayment,      // ä¿¡ç”¨å¡è¿˜æ¬¾
    LoanPayment,    // è´·æ¬¾è¿˜æ¬¾
    OneTime,        // ä¸€æ¬¡æ€§æ”¶æ”¯
}
```

## ğŸš€ ä¸‹ä¸€æ­¥è®¡åˆ’

### çŸ­æœŸç›®æ ‡ï¼ˆ1-2å‘¨ï¼‰
1. **å®ŒæˆCSVå¯¼å…¥åŠŸèƒ½**
   - å®ç°Importå’ŒImportRowå®ä½“
   - åˆ›å»ºå¯¼å…¥æ˜ å°„é€»è¾‘
   - æ·»åŠ æ•°æ®éªŒè¯

2. **å®ç°é¢„ç®—ç®¡ç†**
   - Budgetå’ŒBudgetCategoryå®ä½“
   - é¢„ç®—è®¡ç®—å’Œè·Ÿè¸ª
   - é¢„ç®—æŠ¥å‘Šç”Ÿæˆ

3. **æ·»åŠ è§„åˆ™å¼•æ“**
   - Ruleå’ŒRuleConditionå®ä½“
   - è‡ªåŠ¨åˆ†ç±»å’Œæ ‡ç­¾
   - äº¤æ˜“åŒ¹é…é€»è¾‘

### ä¸­æœŸç›®æ ‡ï¼ˆ3-4å‘¨ï¼‰
1. **æŠ•èµ„è´¦æˆ·åŠŸèƒ½**
   - Holdingså’ŒSecuritiesç®¡ç†
   - å¸‚åœºæ•°æ®é›†æˆ
   - æŠ•èµ„ç»„åˆåˆ†æ

2. **é«˜çº§æŠ¥è¡¨**
   - æ”¶æ”¯æŠ¥è¡¨
   - èµ„äº§è´Ÿå€ºè¡¨
   - ç°é‡‘æµåˆ†æ

3. **æ•°æ®åŒæ­¥**
   - Plaidé›†æˆ
   - é“¶è¡Œè´¦æˆ·åŒæ­¥
   - å®æ—¶ä½™é¢æ›´æ–°

## ğŸ“ˆ è¿›åº¦ç»Ÿè®¡

- **æ€»ä½“å®Œæˆåº¦**: çº¦65%
- **æ ¸å¿ƒåŠŸèƒ½**: 90%å®Œæˆ
- **é«˜çº§åŠŸèƒ½**: 40%å®Œæˆ
- **ä»£ç è¡Œæ•°**: çº¦15,000è¡Œ
- **æµ‹è¯•è¦†ç›–ç‡**: å¾…å®ç°

## ğŸ”§ æŠ€æœ¯å€ºåŠ¡

1. **éœ€è¦æ·»åŠ çš„æµ‹è¯•**
   - å•å…ƒæµ‹è¯•
   - é›†æˆæµ‹è¯•
   - E2Eæµ‹è¯•

2. **æ€§èƒ½ä¼˜åŒ–**
   - æŸ¥è¯¢ä¼˜åŒ–
   - ç¼“å­˜ç­–ç•¥
   - æ‰¹é‡æ“ä½œ

3. **é”™è¯¯å¤„ç†**
   - æ›´è¯¦ç»†çš„é”™è¯¯ç±»å‹
   - é”™è¯¯æ¢å¤æœºåˆ¶
   - ç”¨æˆ·å‹å¥½çš„é”™è¯¯æ¶ˆæ¯

## æ€»ç»“

é€šè¿‡ç›´æ¥å‚è€ƒMaybeçš„æºä»£ç ï¼ŒJive Moneyçš„å¼€å‘è¿›åº¦å¤§å¤§åŠ å¿«ã€‚æˆ‘ä»¬ä¸ä»…å¤åˆ¶äº†åŠŸèƒ½ï¼Œè¿˜ç†è§£äº†å…¶è®¾è®¡ç†å¿µå’Œæœ€ä½³å®è·µã€‚å½“å‰å·²ç»å®ç°äº†æ ¸å¿ƒçš„è´¦æˆ·å’Œäº¤æ˜“ç®¡ç†åŠŸèƒ½ï¼Œè¿™å æ•´ä¸ªç³»ç»Ÿçš„65%å·¦å³ã€‚æ¥ä¸‹æ¥å°†ç»§ç»­å‚è€ƒMaybeçš„å®ç°ï¼Œå®Œæˆå‰©ä½™çš„CSVå¯¼å…¥ã€é¢„ç®—ç®¡ç†å’Œè§„åˆ™å¼•æ“ç­‰åŠŸèƒ½ã€‚