# Jive Money ç³»ç»ŸçŠ¶æ€æŠ¥å‘Š

## æ›´æ–°æ—¶é—´
2025-09-02

## ğŸš€ ç³»ç»Ÿè¿è¡ŒçŠ¶æ€

### API æœåŠ¡ (Ruståç«¯)
- **çŠ¶æ€**: âœ… è¿è¡Œä¸­
- **åœ°å€**: http://localhost:8012
- **å¥åº·æ£€æŸ¥**: http://localhost:8012/health
- **ç‰ˆæœ¬**: 1.0.0
- **ç¼–è¯‘çŠ¶æ€**: Releaseæ¨¡å¼ï¼Œ0é”™è¯¯ï¼Œ0è­¦å‘Š

### Web åº”ç”¨ (Flutterå‰ç«¯)
- **çŠ¶æ€**: âœ… è¿è¡Œä¸­
- **åœ°å€**: http://localhost:3021
- **æ„å»ºç‰ˆæœ¬**: Releaseæ¨¡å¼
- **Service Worker**: æ­£å¸¸å·¥ä½œ

## ğŸ“ å·²å®Œæˆçš„ä¿®å¤

### Rust åç«¯ä¿®å¤
1. âœ… ä¿®å¤æ‰€æœ‰ç¼–è¯‘è­¦å‘Š
   - æœªä½¿ç”¨çš„å¯¼å…¥
   - æœªä½¿ç”¨çš„å˜é‡
   - æœªè¯»å–çš„å­—æ®µ
   - æœªä½¿ç”¨çš„å‡½æ•°

2. âœ… WebSocket å®ç°
   - ä¿®å¤äº†çŠ¶æ€ç®¡ç†é—®é¢˜
   - ä¿®å¤äº†ç±»å‹å¯¼å…¥é”™è¯¯
   - å®ç°äº†å®æ—¶é€šä¿¡åŠŸèƒ½

3. âœ… æ•°æ®åº“é›†æˆ
   - PostgreSQLè¿æ¥æ­£å¸¸
   - è¿æ¥æ± é…ç½®å®Œæˆ

### Flutter å‰ç«¯ä¿®å¤
1. âœ… ä¾èµ–æ›´æ–°
   - æ›´æ–°äº†93ä¸ªè¿‡æ—¶çš„åŒ…
   - ç‰¹åˆ«æ˜¯file_pickerä»6.1.1å‡çº§åˆ°8.1.4
   - æ¶ˆé™¤äº†æ‰€æœ‰file_pickeræ’ä»¶è­¦å‘Š

2. âœ… ä¿®å¤index.htmlè¯­æ³•é”™è¯¯
   - ä¿®å¤äº†serviceWorkerVersionåŒå¼•å·é—®é¢˜
   - æ›´æ–°äº†FlutteråŠ è½½å™¨è°ƒç”¨æ–¹å¼

3. âœ… ä¿®å¤ç¼–è¯‘é”™è¯¯
   - CardTheme -> CardThemeDataç±»å‹ä¿®æ­£

## ğŸ›  å¿«é€Ÿå¯åŠ¨æŒ‡å—

### å¯åŠ¨æ‰€æœ‰æœåŠ¡
```bash
./start-services.sh
```

### åœæ­¢æ‰€æœ‰æœåŠ¡
```bash
./stop-services.sh
```

### æ‰‹åŠ¨å¯åŠ¨

#### APIæœåŠ¡
```bash
cd jive-api
cargo run --release --bin jive-api
# æˆ–ä½¿ç”¨å·²ç¼–è¯‘ç‰ˆæœ¬
./target/release/jive-api
```

#### Webåº”ç”¨
```bash
cd jive-flutter
# å¼€å‘æ¨¡å¼
flutter run -d chrome --web-port=3021

# æˆ–ä½¿ç”¨PythonæœåŠ¡å™¨æä¾›å·²æ„å»ºç‰ˆæœ¬
python3 -m http.server 3021 --directory build/web
```

## ğŸ“Š ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Flutter Web UI                 â”‚
â”‚         http://localhost:3021            â”‚
â”‚                                          â”‚
â”‚  - è´¦æœ¬ç®¡ç†                              â”‚
â”‚  - äº¤æ˜“è®°å½•                              â”‚
â”‚  - é¢„ç®—è·Ÿè¸ª                              â”‚
â”‚  - æ•°æ®å¯è§†åŒ–                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚ REST API + WebSocket
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Rust API Server                  â”‚
â”‚        http://localhost:8012             â”‚
â”‚                                          â”‚
â”‚  - JWTè®¤è¯                               â”‚
â”‚  - RESTful API                          â”‚
â”‚  - WebSocketå®æ—¶æ›´æ–°                     â”‚
â”‚  - ä¸šåŠ¡é€»è¾‘å¤„ç†                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚ SQLx
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         PostgreSQL Database              â”‚
â”‚         localhost:5432                   â”‚
â”‚                                          â”‚
â”‚  - ç”¨æˆ·æ•°æ®                              â”‚
â”‚  - äº¤æ˜“è®°å½•                              â”‚
â”‚  - è´¦æˆ·ä¿¡æ¯                              â”‚
â”‚  - ç³»ç»Ÿé…ç½®                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” API ç«¯ç‚¹æ¦‚è§ˆ

### è®¤è¯
- POST `/api/v1/auth/register` - ç”¨æˆ·æ³¨å†Œ
- POST `/api/v1/auth/login` - ç”¨æˆ·ç™»å½•
- POST `/api/v1/auth/refresh` - åˆ·æ–°ä»¤ç‰Œ
- GET `/api/v1/auth/user` - è·å–å½“å‰ç”¨æˆ·
- POST `/api/v1/auth/password` - ä¿®æ”¹å¯†ç 

### è´¦æˆ·ç®¡ç†
- GET `/api/v1/accounts` - è·å–è´¦æˆ·åˆ—è¡¨
- POST `/api/v1/accounts` - åˆ›å»ºè´¦æˆ·
- GET `/api/v1/accounts/:id` - è·å–è´¦æˆ·è¯¦æƒ…
- PUT `/api/v1/accounts/:id` - æ›´æ–°è´¦æˆ·
- DELETE `/api/v1/accounts/:id` - åˆ é™¤è´¦æˆ·

### äº¤æ˜“ç®¡ç†
- GET `/api/v1/transactions` - è·å–äº¤æ˜“åˆ—è¡¨
- POST `/api/v1/transactions` - åˆ›å»ºäº¤æ˜“
- GET `/api/v1/transactions/:id` - è·å–äº¤æ˜“è¯¦æƒ…
- PUT `/api/v1/transactions/:id` - æ›´æ–°äº¤æ˜“
- DELETE `/api/v1/transactions/:id` - åˆ é™¤äº¤æ˜“

### æ”¶æ¬¾äººç®¡ç†
- GET `/api/v1/payees` - è·å–æ”¶æ¬¾äººåˆ—è¡¨
- POST `/api/v1/payees` - åˆ›å»ºæ”¶æ¬¾äºº
- PUT `/api/v1/payees/:id` - æ›´æ–°æ”¶æ¬¾äºº
- DELETE `/api/v1/payees/:id` - åˆ é™¤æ”¶æ¬¾äºº

### è§„åˆ™å¼•æ“
- GET `/api/v1/rules` - è·å–è§„åˆ™åˆ—è¡¨
- POST `/api/v1/rules` - åˆ›å»ºè§„åˆ™
- PUT `/api/v1/rules/:id` - æ›´æ–°è§„åˆ™
- DELETE `/api/v1/rules/:id` - åˆ é™¤è§„åˆ™
- POST `/api/v1/rules/execute` - æ‰§è¡Œè§„åˆ™

### WebSocket
- WS `/ws?token=<jwt_token>` - WebSocketè¿æ¥ç«¯ç‚¹

## ğŸ› å·²çŸ¥é—®é¢˜

1. **æ•°æ®åº“è¿ç§»**
   - éœ€è¦è¿è¡Œæ•°æ®åº“è¿ç§»è„šæœ¬åˆ›å»ºè¡¨ç»“æ„

2. **WebAssemblyå…¼å®¹æ€§**
   - dio_web_adapterä¸æ”¯æŒWASMç¼–è¯‘

3. **éå…³é”®è­¦å‘Š**
   - 10ä¸ªæœªä½¿ç”¨ä»£ç è­¦å‘Šï¼ˆmain_simple.dartï¼‰
   - åºŸå¼ƒçš„APIä½¿ç”¨ï¼ˆColor.value, background/onBackgroundï¼‰

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

- **APIå“åº”æ—¶é—´**: < 50ms (æœ¬åœ°)
- **Webæ„å»ºå¤§å°**: ~2MB (å‹ç¼©å)
- **å†…å­˜ä½¿ç”¨**: ~50MB (Rust API)
- **å¹¶å‘è¿æ¥**: æ”¯æŒ100+ WebSocketè¿æ¥

## ğŸ” å®‰å…¨ç‰¹æ€§

- JWTä»¤ç‰Œè®¤è¯
- å¯†ç ä½¿ç”¨Argon2åŠ å¯†
- CORSé…ç½®
- SQLæ³¨å…¥é˜²æŠ¤ï¼ˆä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢ï¼‰

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Rustç¼–è¯‘è­¦å‘Šä¿®å¤æŠ¥å‘Š](docs/WARNINGS_FIXED.md)
- [Flutterä¾èµ–æ›´æ–°æŠ¥å‘Š](docs/FLUTTER_DEPENDENCIES_UPDATE.md)
- [WebSocketç¼–è¯‘é—®é¢˜è§£å†³æ–¹æ¡ˆ](docs/WEBSOCKET_COMPILATION_FIX.md)

## ğŸš¦ ä¸‹ä¸€æ­¥è®¡åˆ’

1. **æ•°æ®åº“å®Œå–„**
   - åˆ›å»ºå®Œæ•´çš„è¿ç§»è„šæœ¬
   - æ·»åŠ ç§å­æ•°æ®

2. **åŠŸèƒ½å®ç°**
   - å®Œæˆæ•°æ®å¯¼å…¥/å¯¼å‡ºåŠŸèƒ½
   - å®ç°é«˜çº§æœç´¢å’Œè¿‡æ»¤

3. **éƒ¨ç½²å‡†å¤‡**
   - Dockerå®¹å™¨åŒ–
   - CI/CDé…ç½®
   - ç”Ÿäº§ç¯å¢ƒé…ç½®

## ğŸ“ æ•…éšœæ’é™¤

### APIæœåŠ¡æ— æ³•å¯åŠ¨
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i:8012
# æ€æ­»å ç”¨è¿›ç¨‹
lsof -ti:8012 | xargs kill -9
```

### Webåº”ç”¨æ— æ³•è®¿é—®
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i:3021
# é‡æ–°æ„å»º
cd jive-flutter
flutter build web --release
```

### æ•°æ®åº“è¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥PostgreSQLæœåŠ¡
psql -U jive -d jive_money -h localhost
# æ£€æŸ¥ç¯å¢ƒå˜é‡
echo $DATABASE_URL
```

---

*ç³»ç»ŸçŠ¶æ€è‰¯å¥½ï¼Œæ‰€æœ‰æœåŠ¡æ­£å¸¸è¿è¡Œï¼* ğŸ‰