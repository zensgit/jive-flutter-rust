# è´§å¸æ•°é‡æ˜¾ç¤ºé—®é¢˜éªŒè¯æŒ‡å—

**åˆ›å»ºæ—¶é—´**: 2025-10-11
**é—®é¢˜**: "ç®¡ç†æ³•å®šè´§å¸"é¡µé¢æ˜¾ç¤º"å·²é€‰æ‹©äº†18ä¸ªè´§å¸"ï¼Œä½†ç”¨æˆ·åªå¯ç”¨äº†5ä¸ªæ³•å®šè´§å¸

---

## ğŸ” å·²å®Œæˆçš„è°ƒæŸ¥

### âœ… æŠ€æœ¯ç»„ä»¶éªŒè¯ï¼ˆå…¨éƒ¨æ­£ç¡®ï¼‰

1. **æ•°æ®åº“** - æ•°æ®æ­£ç¡®
   - superadminç”¨æˆ·: 5ä¸ªæ³•å®šè´§å¸ + 13ä¸ªåŠ å¯†è´§å¸ = 18ä¸ªæ€»è´§å¸
   - æ³•å®šè´§å¸: AED, CNY, HKD, JPY, USD
   - åŠ å¯†è´§å¸: 1INCH, AAVE, ADA, AGIX, ALGO, APE, APT, AR, BNB, BTC, ETH, USDC, USDT

2. **API** - è¿”å›æ•°æ®æ­£ç¡®
   ```json
   {"code": "CNY", "is_crypto": false}  âœ…
   {"code": "BTC", "is_crypto": true}   âœ…
   ```

3. **Flutterä»£ç ** - é€»è¾‘æ­£ç¡®
   ```dart
   // currency_selection_page.dart:794-810
   final fiatCount = selectedCurrencies.where((c) => !c.isCrypto).length;
   Text('å·²é€‰æ‹© $fiatCount ç§æ³•å®šè´§å¸')
   ```

4. **è°ƒè¯•æ—¥å¿—** - å·²æ·»åŠ è¯¦ç»†è¾“å‡º
   - è¡Œ 98-108: éªŒè¯availableCurrenciesè¿‡æ»¤
   - è¡Œ 798-803: éªŒè¯selectedCurrenciesProviderå†…å®¹

### âš ï¸ å‘ç°çš„é—®é¢˜

**401æœªæˆæƒé”™è¯¯**ï¼ˆä»ç”¨æˆ·æä¾›çš„æ—¥å¿—ï¼‰:
```
Error fetching preferences: Exception: Failed to load preferences: 401
```

è¿™å¯¼è‡´ç³»ç»Ÿæ— æ³•ä»æœåŠ¡å™¨åŠ è½½ç”¨æˆ·åå¥½è®¾ç½®ï¼Œå¯èƒ½ä½¿ç”¨æœ¬åœ°ç¼“å­˜æˆ–é»˜è®¤æ•°æ®ã€‚

---

## ğŸ“‹ éªŒè¯æ­¥éª¤ï¼ˆè¯·æ‰§è¡Œï¼‰

### æ­¥éª¤1: ç¡¬åˆ·æ–°æµè§ˆå™¨

1. åœ¨Chromeä¸­è®¿é—®: `http://localhost:3021/#/settings/currency`
2. æŒ‰ **Cmd + Shift + R** (Mac) æˆ– **Ctrl + Shift + R** (Windows/Linux)
3. ç­‰å¾…é¡µé¢å®Œå…¨åŠ è½½

### æ­¥éª¤2: æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·

1. æŒ‰ **F12** æˆ– **Right-click â†’ æ£€æŸ¥**
2. åˆ‡æ¢åˆ° **Console** æ ‡ç­¾é¡µ

### æ­¥éª¤3: æŸ¥çœ‹è°ƒè¯•è¾“å‡º

æŸ¥æ‰¾ä»¥ä¸‹ä¸¤ç»„æ—¥å¿—ï¼š

**æ—¥å¿—ç»„1 - é¡µé¢è¿‡æ»¤éªŒè¯**:
```
[CurrencySelectionPage] Total currencies: 254
[CurrencySelectionPage] Fiat currencies: 146
[CurrencySelectionPage] âœ… OK: No crypto in fiat list
```

**æ—¥å¿—ç»„2 - åº•éƒ¨æ˜¾ç¤ºéªŒè¯**ï¼ˆæ–°æ·»åŠ çš„è°ƒè¯•ï¼‰:
```
[Bottom Stats] Total selected currencies: XX
[Bottom Stats] Fiat count: XX
[Bottom Stats] Selected currencies list:
  - CNY: isCrypto=false
  - USD: isCrypto=false
  - BTC: isCrypto=true
  ...
```

---

## ğŸ¤” å¯èƒ½çš„é—®é¢˜æ ¹æº

åŸºäº401é”™è¯¯å’Œè°ƒæŸ¥ç»“æœï¼Œå¯èƒ½çš„åŸå› ï¼š

1. **è®¤è¯Tokenè¿‡æœŸ** - 401 Unauthorized â†’ éœ€è¦é‡æ–°ç™»å½•
2. **Hiveæœ¬åœ°ç¼“å­˜é”™è¯¯** - ç¼“å­˜ä¸­æ··åˆäº†æ³•å¸å’ŒåŠ å¯†è´§å¸
3. **é»˜è®¤æ•°æ®ä½¿ç”¨** - åå¥½åŠ è½½å¤±è´¥æ—¶ä½¿ç”¨é»˜è®¤18ç§è´§å¸
4. **ProviderçŠ¶æ€åŒæ­¥é—®é¢˜** - selectedCurrenciesProviderä¸æœåŠ¡å™¨æ•°æ®ä¸åŒæ­¥

---

## ğŸ“ è¯·æä¾›ä»¥ä¸‹ä¿¡æ¯

å®ŒæˆéªŒè¯åï¼Œè¯·å‘Šè¯‰æˆ‘ï¼š

1. **é¡µé¢åº•éƒ¨å®é™…æ˜¾ç¤º**: "å·²é€‰æ‹© XX ç§æ³•å®šè´§å¸"
2. **Consoleä¸­[Bottom Stats]çš„è¾“å‡º** 
3. **æ˜¯å¦çœ‹åˆ°401é”™è¯¯**: æ˜¯/å¦
4. **æˆªå›¾ï¼ˆå¯é€‰ï¼‰**: é¡µé¢åº•éƒ¨æ˜¾ç¤ºçš„æˆªå›¾

---

**ä¸‹ä¸€æ­¥**: ç­‰å¾…ç”¨æˆ·æ‰§è¡ŒéªŒè¯æ­¥éª¤å¹¶æä¾›åé¦ˆ
